<app-background>
  <div class="container mx-auto px-4 py-8 max-w-md">
    <button (click)="goBack()" class="mb-6 group transition duration-300 hover:drop-shadow-[0_0_10px_rgba(255,1,170,0.8)]">
      <svg class="w-10 h-10 text-neon-cyan group-hover:scale-110 transition duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5M12 19l-7-7 7-7" />
      </svg>
    </button>
    <h2 class="text-neon-cyan text-2xl font-bold font-jetbrains text-center mb-8">Change ton mot de passe</h2>
    <div class="text-center mb-4">
      <span class="text-neon-cyan font-jetbrains text-lg">{{ readonlyUser().username }}</span>
    </div>

    <form (submit)="changePassword(); $event.preventDefault()" class="space-y-6">
      <!-- Champ username caché pour l'accessibilité recommandation Google -->
      <input type="text" name="username" [value]="readonlyUser().username" autocomplete="username" hidden tabindex="-1" aria-hidden="true" />
      <div class="flex flex-col items-center">
        <label class="block text-neon-cyan font-jetbrains mb-2 text-center w-full">Tape ton mot de passe actuel</label>
        <app-input type="password" [value]="currentPassword()" (valueChange)="currentPassword.set($event)" name="currentPassword" placeholder="Mot de passe actuel" required></app-input>
      </div>
      <div class="flex flex-col items-center">
        <label class="block text-neon-cyan font-jetbrains mb-2 text-center w-full">Choisis un nouveau mot de passe</label>
        <app-input type="password" [value]="newPassword()" (valueChange)="newPassword.set($event)" name="newPassword" placeholder="Choisis un nouveau mot de passe" required></app-input>
      </div>
      <div class="flex flex-col items-center">
        <label class="block text-neon-cyan font-jetbrains mb-2 text-center w-full">Confirme le nouveau mot de passe</label>
        <app-input type="password" [value]="confirmPassword()" (valueChange)="confirmPassword.set($event)" name="confirmPassword" placeholder="Confirme le nouveau mot de passe" required></app-input>
      </div>
      <div class="pt-4 flex justify-center">
        <app-button type="submit" [disabled]="loading()">OK</app-button>
      </div>
      <div *ngIf="error()" class="text-red-400 text-center mt-2">{{ error() }}</div>
      <div *ngIf="success()" class="text-green-400 text-center mt-2">{{ success() }}</div>
    </form>
  </div>
</app-background>
